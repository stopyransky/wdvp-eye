!function(e){function t(t){for(var n,i,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)i=l[d],a[i]&&p.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([131,1]),r()}({130:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,o,i,l=r(47),s=r(350),c=r(351);function u(){return o?n.dataItems.filter(function(e){return e.country===o}).filter(function(e){return"Total"!==e.indicator}):null}function d(e){o=e,s.default.updateOnCountryChange(u(),o),i.setCurrentCountry(e)}function p(e){a=e,i.setCurrentIndicator(a)}t.updateOnCountryChange=d,t.updateOnIndicatorChange=p,t.default={init:function(e,t){var r=t.width,a=t.height;i=t,n=t.data;var o=t.data.indicators,d=l.select(e).append("svg").attr("class","radial-graph").attr("width",r).attr("height",a).append("g").attr("transform","translate("+.5*r+", "+.5*a+")");s.default.init(d,u(),o),c.default.init(d,t.data)},updateOnCountryChange:d,updateOnIndicatorChange:p}},131:function(e,t,r){r(132),e.exports=r(334)},334:function(e,t,r){"use strict";r.r(t);r(335),r(340)},335:function(e,t,r){var n=r(336);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(338)(n,a);n.locals&&(e.exports=n.locals)},336:function(e,t,r){(t=e.exports=r(337)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Teko|Lato);",""]),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=BenchNine:400,700&subset=latin-ext);",""]),t.push([e.i,'.radial-graph {\n  background-color: #202021; }\n  .radial-graph-label {\n    font-family: "BenchNine", "Teko", sans-serif;\n    fill: #a3aac2;\n    font-size: 1rem;\n    pointer-events: none;\n    max-width: 80px; }\n  .radial-graph .label {\n    fill: #a3aac2;\n    font-size: 0.85rem;\n    font-family: "BenchNine", "Teko", sans-serif; }\n    .radial-graph .label.selected {\n      fill: white;\n      cursor: pointer; }\n    .radial-graph .label.text-hover:not(.selected) {\n      fill: white;\n      cursor: pointer; }\n  .radial-graph .indicator-ring-circle {\n    stroke: black;\n    fill: transparent;\n    pointer-events: none; }\n  .radial-graph .comparator-ring-circle {\n    stroke: black;\n    fill: transparent;\n    pointer-events: none; }\n  .radial-graph .heatmap-ring-path.selected {\n    stroke: white;\n    stroke-width: 1;\n    opacity: 1; }\n  .radial-graph .heatmap-ring-path.animated {\n    fill: white; }\n  .radial-graph .heatmap-ring-path.hover:not(.selected) {\n    stroke: white;\n    stroke-width: 2; }\n  .radial-graph .heatmap-ring-indicator-labels .radial-label-path {\n    fill: transparent;\n    pointer-events: none; }\n\n.ir-marker:hover {\n  cursor: pointer; }\n\n.ir-ring-helper {\n  stroke: #a3aac2; }\n\n.ir-indicator-radial {\n  stroke: #a3aac2; }\n\n#radial-container {\n  position: relative;\n  line-height: 0; }\n\n.fh-panel {\n  position: relative;\n  background-color: rgba(240, 240, 240, 0.8);\n  font-family: "BenchNine", "Teko", sans-serif;\n  font-size: 1rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.16), 0 2px 4px rgba(0, 0, 0, 0.23);\n  border-radius: 4px; }\n  .fh-panel h1 {\n    font-size: 1.4rem; }\n  .fh-panel--collapsed {\n    position: fixed;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    bottom: 40px;\n    right: 40px;\n    width: 60px;\n    height: 60px; }\n    .fh-panel--collapsed:hover {\n      cursor: pointer;\n      background-color: #f0f0f0; }\n  .fh-panel .fh-panel--expanded {\n    position: fixed;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    padding: 12px 16px;\n    bottom: 40px;\n    right: 40px;\n    width: 250px;\n    min-height: 210px;\n    max-height: 90%; }\n    .fh-panel .fh-panel--expanded p {\n      margin-bottom: 1.6rem; }\n    .fh-panel .fh-panel--expanded .close {\n      align-self: flex-end;\n      cursor: pointer; }\n  .fh-panel .panel-info {\n    margin-top: 16px; }\n    .fh-panel .panel-info.empty {\n      margin-top: 30px; }\n    .fh-panel .panel-info span {\n      font-weight: 700; }\n\nhtml, body {\n  background-color: #232323;\n  margin: 0px;\n  padding: 0px;\n  height: 100%;\n  overflow-x: hidden;\n  overscroll-behavior: none;\n  font-family: "Lato", sans-serif;\n  line-height: 1.5rem; }\n\n.fh-app {\n  display: flex;\n  flex-direction: column; }\n  .fh-app .parallax {\n    height: 100vh;\n    width: 100%;\n    background-color: #efefef;\n    background-attachment: fixed;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.16); }\n    .fh-app .parallax.svg-parallax {\n      min-height: 1024px;\n      height: 100vh; }\n  .fh-app .screen {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    min-height: 100vh; }\n    .fh-app .screen .content {\n      width: 600px;\n      max-width: 800px;\n      margin: 30px 0px;\n      display: flex;\n      flex-direction: column; }\n      .fh-app .screen .content h1 {\n        font-size: 2.625rem;\n        font-family: "BenchNine", "Teko", sans-serif; }\n      .fh-app .screen .content .social-icons {\n        display: flex;\n        justify-content: flex-end; }\n    .fh-app .screen .scroll-info {\n      position: absolute;\n      bottom: 10px; }\n\n.tooltip {\n  font-family: "BenchNine", "Teko", sans-serif;\n  fill: rgba(240, 240, 240, 0.8); }\n  .tooltip.tt-scatterplot {\n    font-size: 1.25rem; }\n  .tooltip.tt-heatmap {\n    font-size: 0.85rem; }\n\n.gh {\n  position: absolute;\n  left: 40px;\n  bottom: 40px;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  background: rgba(240, 240, 240, 0.8); }\n  .gh img {\n    width: 24px;\n    height: 24px; }\n  .gh:hover {\n    background: #f0f0f0; }\n',""])},340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),a=r(342),o=r(346);a.render(n.createElement(o.default),document.getElementById("root"))},346:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),a=r(347);t.default=function(){return n.createElement("div",{className:"fh-app"},n.createElement(a.default,null))}},347:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(42),o=r(42),i=r(47),l=r(348),s=r(67),c=r(130),u=r(353),d=r(354),p=r(51),f={width:window.innerWidth,height:window.innerHeight>1024?window.innerHeight:1024,data:null,currentCountry:null,currentIndicator:null};function h(e,t){switch(t.type){case"resize":return n({},e,{width:t.width,height:t.height});default:return d.baseReducer(e,t)}}t.default=function(){var e=o.useRef(null),t=o.useReducer(h,f),r=t[0],n=t[1],d=r.data,g=r.width,m=r.height,y=r.currentCountry,v=r.currentIndicator,b=function(e,t){return n({type:e,value:t})},x=function(e){var t=d.countries.find(function(t){return t.country===e});b("currentCountry",t)},w=function(e){b("currentIndicator",p.categoryMap[e])};return o.useEffect(function(){i.dsv(";",s.dataSource,s.modelData).then(s.makeData).then(function(e){var t=e.dataItems,r=e.indicators,n=e.countries;b("data",{dataItems:t,indicators:r,countries:n})})},[]),o.useEffect(function(){if(d){var t={data:d,width:g,height:m,setCurrentCountry:x,setCurrentIndicator:w};c.default.init(e.current,t)}},[d]),a.createElement("div",{className:"radial-screen parallax svg-parallax"},a.createElement("div",{id:"radial-container",ref:e}),a.createElement(u.default,{country:y,indicator:v}),a.createElement("a",{href:"https://github.com/stopyransky/wdvp-eye",rel:"noreferrer noopener",title:"Visit repository on Github"},a.createElement("span",{className:"gh"},a.createElement("img",{src:l}))))}},348:function(e,t,r){e.exports=r.p+"images/githube113b417.png"},349:function(e,t,r){e.exports=r.p+"data/wdvp-newddc446b0.csv"},350:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,o,i=r(47),l=r(51),s=r(67),c=60,u=110,d=u+8,p=u+6,f=c-10,h="Select a country to view details here.",g=null,m=null,y=null,v=null,b=null;function x(e){return function(t){var r=(u-c)/50,n=i.range(50).map(function(e,t){return c+t*r}),a=e[t].values.map(function(e){return e.normalized});return i.scaleQuantile().domain(a).range(n)}}function w(e){e.on("mouseover",function(e){i.select(this).classed("hover",!0);var t,r,c=a[e[0]].average,u=(t=o,r=e[0],a[r].values.find(function(e){return e.country===t}).value),d=l.categoryMap[e[0]].label+": "+(null===u?"no data":s.formatNumber(u,2)),p="Average: "+s.formatNumber(c,2),f=i.mouse(this)[0],h=i.mouse(this)[1],g=n.append("g").attr("id","radial-tooltip").attr("class","tooltip").attr("transform","translate("+f+", "+h+")"),m=g.append("rect").attr("x",12).attr("y",0).attr("rx","3").attr("ry","3").attr("height",42).style("pointer-events","none").style("fill","white").style("opacity","0.9"),y=g.append("text").attr("id","radial-tooltip-text").attr("alignment-baseline","central").attr("y",12).style("pointer-events","none").style("fill","black");y.append("tspan").attr("x",14).attr("dy","0.2em").text(d),y.append("tspan").attr("x",14).attr("dy","1.2em").text(p);var v=y.node().getComputedTextLength()+6;y.attr("x",14).attr("text-anchor","start"),m.attr("width",v)}),e.on("mouseout",function(){i.select(this).classed("hover",!1),i.select("#radial-tooltip").remove()})}function C(e,t){var r=[];return Object.keys(e).forEach(function(n){var a=e[n].desc,o=e[n][t];r.push([e[n].indicator,o,a])}),r}t.default={init:function(e,t,r){n=e,t,a=r,g=e.append("g").attr("class","indicator-ring-group");var l=x(a);g.selectAll("circle").data([c,u+3]).enter().append("circle").attr("cx",0).attr("cy",0).attr("r",function(e){return e}).attr("class","ir-ring-helper").attr("fill","transparent").attr("stroke-dasharray","1 10").style("opacity",0),g.append("text").attr("class","radial-graph-label").attr("alignment-baseline","central").attr("text-anchor","middle").attr("y",0).attr("x",0).style("fill","white").style("pointer-events","none").text(o||h);var s=C(a,"normAverage"),E=i.range(19).map(function(e,t){return t}),S=i.scaleBand().domain(E).range([0,2*Math.PI]);m=i.scaleBand().domain(E).range([-Math.PI/2,2*Math.PI-Math.PI/2]),y=i.radialLine().curve(i.curveCatmullRomClosed).angle(function(e,t){return S(t)}).radius(function(e){return e[0]&&l(e[0])(e[1])}),g.append("path").attr("class","ir-indicator-radial").attr("d",o?y(s):"M0,0").attr("opacity","0").attr("fill","transparent"),g.append("g").attr("class","ir-circle-group").selectAll("circle").data(s).enter().append("circle").attr("class","ir-marker").attr("cx",function(e,t){return e[0]&&l(e[0])(e[1])*Math.cos(m(t))}).attr("cy",function(e,t){return e[0]&&l(e[0])(e[1])*Math.sin(m(t))}).attr("fill",function(e){return null===e[1]?"transparent":"white"}).attr("stroke","white").call(w),(b=g.append("g").classed("labels",!0).classed("segment",!0).style("pointer-events","none").attr("transform","rotate(30)")).append("def").append("path").attr("id","segment-label-path-1").attr("d","m0 -"+(d+2)+" a"+(d+2)+" "+(d+2)+" 0 1 1 -1 0"),b.append("def").append("path").attr("id","segment-label-path-2").attr("d","m0 -"+f+" a"+f+" "+f+" 0 1 1 -1 0"),b.selectAll("text").data([{type:"",label:"SOCIETY",angle:0},{type:"",label:"ECONOMY",angle:0},{type:"",label:"GOVERNMENT",angle:0},{type:"",label:"ENVIRONMENT",angle:0}]).enter().append("text").attr("opacity",0).append("textPath").attr("xlink:href","#segment-label-path-1").style("font-size","8px").style("fill","white").attr("startOffset",function(e,t){return 100*t/4+"%"}).text(function(e){return e.label}),(v=g.append("g").classed("legend-labels",!0).classed("label",!0).style("pointer-events","none")).append("def").append("path").attr("id","legend-label-path-1").attr("d","m0 -"+p+" a"+p+" "+p+" 0 1 1 -1 0"),v.append("def").append("path").attr("id","legend-label-path-2").attr("d","m0 -"+f+" a"+f+" "+f+" 0 1 1 -1 0"),v.append("text").attr("opacity",0).attr("transform","rotate(-8)").append("textPath").attr("xlink:href","#legend-label-path-1").style("font-size","10px").attr("startOffset","0").text("strong"),v.append("text").attr("opacity",0).attr("transform","rotate(-11)").append("textPath").attr("xlink:href","#legend-label-path-2").style("font-size","10px").attr("startOffset","0").text("weak")},updateOnCountryChange:function(e,t){o=t;var r=C(e,"normalized");g.select(".radial-graph-label").text(o),g.selectAll(".ir-average-radial").transition().attr("opacity",1),g.selectAll(".ir-ring-helper").transition().style("opacity",1),g.select(".ir-indicator-radial").transition().attr("d",y(r)).attr("fill","transparent").transition().attr("opacity",1);var n=x(a);g.selectAll(".ir-marker").data(r).transition().attr("cx",function(e,t){return e[0]&&n(e[0])(e[1])*Math.cos(m(t))}).attr("cy",function(e,t){return e[0]&&n(e[0])(e[1])*Math.sin(m(t))}).attr("r",3).attr("fill",function(e){return null===e[1]?"black":"white"}).attr("stroke","white"),b.selectAll("text").transition().attr("opacity",1),v.selectAll("text").transition().attr("opacity",1)}}},351:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(47),a=r(67),o=r(352),i=r(130),l=r(51);t.hrInnerRadius=140,t.hrCellHeight=12;var s,c,u,d,p,f,h,g,m,y,v,b,x,w,C=120,E=2,S=2e3/360,k=.15,O=1.76,A=n.arc(),P={inOut:600,in:300,dur:1600,out:200},I=!0,q=0;function N(e,t){return y(t)>=Math.PI?"end":"start"}function R(e){var t=p.indexOf(e.indicator);e.innerRadius=v(t),e.outerRadius=v(t+1);var r=z(e.country);return e.startAngle=y(r),e.endAngle=e.startAngle+y.bandwidth(),e.padAngle=.003,A({innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,padAngle:e.padAngle})}function M(e){var r=z(e),n=y.bandwidth(),a=y(r);return a=a>=Math.PI?a+.01:a+n,A({innerRadius:q+E,outerRadius:q+C,padRadius:t.hrInnerRadius,startAngle:a,endAngle:a})}function T(e,r){var n=t.hrInnerRadius+2+r*t.hrCellHeight;return"m "+n*Math.sin(.01)+" -"+n*Math.cos(.025)+" a "+n+" "+n+" 0 1 1 -1 0"}function D(e){var t,r=[],a=[],o=function(e){if(e.value){r.push(e)}else{a.push(e)}};n.selectAll("."+e).each(o),(t=r.sort(L)).push.apply(t,a);var i=r.map(function(e){return e.country});g=f,f=i,G(a.map(function(e){return e.code}))}function G(e){i.default.updateOnIndicatorChange(s),F(e),B()}function F(e){var t;n.selectAll(".heatmap-ring-path").transition().delay(U).duration(function(e){return P.inOut-U(e)}).attr("opacity",.4).transition().ease(n.easeExpInOut).delay(function(e){return e.normalized*100}).duration(P.dur).attr("opacity",.4).attrTween("d",j).transition().duration(U).attr("opacity",function(t){return e.includes(t.code)?.4:1})}function B(){x.transition().duration(P.dur).attrTween("d",function(e){return H(e,1e4)}),w.transition().duration(P.inOut).attr("opacity",0).transition().duration(P.dur).style("text-anchor",function(e,t){return t=z(e),N(e,t)}).transition().duration(P.inOut).attr("opacity",1)}function j(e){var t=g.indexOf(e.country),r=f.indexOf(e.country),a=n.interpolate(t,r),o=y.bandwidth();return function(t){return e.startAngle=m(a(t)),e.endAngle=e.startAngle+o,A({innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,padAngle:e.padAngle})}}function H(e,r){var a=g.indexOf(e),o=f.indexOf(e),i=n.interpolate(a,o),l=y.bandwidth(),s=q+E,c=q+C;return function(e){var n=_(e,.5,r);var a=m(i(e));a=a>=Math.PI?a+.01:a+l;return A({innerRadius:s+n,outerRadius:c+n,padRadius:t.hrInnerRadius,startAngle:a,endAngle:a})}}function _(e,t,r){if(e<t){return e*r}return(1-e)*r}function z(e){return f.indexOf(e)}function W(e){return d.find(function(t){return t.country===e})}function L(e,t){var r=e.desc;return I?r?e.value-t.value:t.value-e.value:r?t.value-e.value:e.value-t.value}function U(e){return P.in+P.in*(I?1-e.normalized:e.normalized)}t.default={init:function(e,r){u=e,d=r.dataItems,h=r.indicators,p=n.set(d.map(function(e){return e.indicator})).values(),f=n.set(d.map(function(e){return e.country})).values(),g=f.slice(),q=t.hrInnerRadius+t.hrCellHeight*p.length,y=n.scaleBand().domain(f.map(function(e,t){return t})).range([k,k+O*Math.PI]).align(0),m=n.scaleLinear().domain([0,f.length]).range([k,k+O*Math.PI]),v=n.scaleLinear().domain([0,p.length]).range([t.hrInnerRadius,q]),(b=u.append("g").attr("class","heatmap-ring")).selectAll("path").data(d,function(e){return e.id}).enter().append("path").attr("class",function(e){return"heatmap-ring-path "+e.code+" "+e.indicator}).attr("fill",function(e){return a.desaturate(function(e){if("Total"===e.indicator)return a.colorize(e.indicator)(e.normalized);var t=h[e.indicator].values.map(function(e){return e.normalized}).sort(function(e,t){return e-t}),r=t.indexOf(e.normalized)/t.length;return a.colorize(e.indicator)(r)}(e),.25)}).attr("display",function(e){return null===e.value?"none":null}).attr("d",R).on("mouseup",function(e){if(c!==e.country){c=e.country;var t=e.code;n.select(".country-label.selected").classed("selected",!1),n.select(".country-label."+t).classed("selected",!0),n.selectAll(".heatmap-ring-path.selected:not(."+s+")").classed("selected",!1),n.selectAll(".heatmap-ring-path."+t).classed("selected",!0),i.default.updateOnCountryChange(c)}}).call(function(e){return o.tooltipGen(e,u)}),E=b.append("g").attr("class","heatmap-ring-indicator-labels").attr("transform","rotate("+S+")"),E.selectAll("path").data(p,function(e){return e}).enter().append("path").attr("fill","transparent").attr("class","radial-label-path").attr("id",function(e,t){return"radial-label-path-"+t}).attr("d",T),E.selectAll("text").data(p,function(e){return e}).enter().append("text").attr("class","label label-radial").style("text-anchor","end").attr("alignment-baseline","central").call(function(e){e.on("mouseover",function(e,t,r){n.select(r[t]).classed("text-hover",!0)}).on("mouseout",function(e,t,r){n.select(r[t]).classed("text-hover",!1)}).on("mouseup",function(e,t,r){if(s===e)I=!I;else{s=e;var a=c?W(c).code:"";n.select(".label-radial.selected").classed("selected",!1),n.select(r[t]).classed("selected",!0);var o=a?":not(."+a+")":"";n.selectAll(".heatmap-ring-path.selected"+o).classed("selected",!1),n.selectAll(".heatmap-ring-path."+e).classed("selected",!0)}D(e)})}).append("textPath").attr("xlink:href",function(e,t){return"#radial-label-path-"+t}).attr("startOffset","100%").text(function(e){return l.categoryMap[e].label}),C=b.append("g").attr("class","heatmap-ring-country-labels").attr("transform","rotate(-0.15)"),x=C.selectAll("path").data(f).enter().append("path").attr("opacity",0).attr("class","country-label-path").attr("id",function(e){return"country-label-path-"+W(e).code}).attr("d",M),w=C.selectAll("text").data(f,function(e){return e}).enter().append("text").attr("class",function(e){return"label country-label "+W(e).code}).attr("alignment-baseline","central").style("text-anchor",N).call(function(e){e.on("mouseover",function(e,t,r){n.select(r[t]).classed("text-hover",!0)}).on("mouseout",function(e,t,r){n.select(r[t]).classed("text-hover",!1)}).on("mouseup",function(e,t,r){if(c!==e){c=e;var a=W(e).code;n.select(".country-label.selected").classed("selected",!1),n.select(r[t]).classed("selected",!0),n.selectAll(".heatmap-ring-path.selected:not(."+s+")").classed("selected",!1),n.selectAll(".heatmap-ring-path."+a).classed("selected",!0),i.default.updateOnCountryChange(c)}})}).append("textPath").attr("class","country-label-textpath").attr("startOffset","50%").attr("xlink:href",function(e){return"#country-label-path-"+W(e).code}).text(function(e){return e});var C;var E}}},352:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(47),a=r(51);t.tooltipGen=function(e,t){e.on("mouseover",function(e,r,o){n.select(o[r]).classed("hover",!0);var i=a.categoryMap[e.indicator].label+": "+(null===e.value?"no data":e.value),l=n.mouse(o[r])[0],s=n.mouse(o[r])[1],c=t.append("g").attr("id","radial-tooltip").attr("class","tooltip").attr("transform","translate("+l+", "+s+")"),u=c.append("rect").attr("x",12).attr("y",0).attr("rx","3").attr("ry","3").attr("height",22).style("pointer-events","none").style("fill","white").style("opacity","0.9"),d=c.append("text").attr("id","radial-tooltip-text").attr("alignment-baseline","central").attr("y",12).style("pointer-events","none").style("fill","black").text(i),p=d.node().getComputedTextLength()+6;d.attr("x",14).attr("text-anchor","start"),u.attr("width",p)}),e.on("mouseout",function(e,t,r){n.select(r[t]).classed("hover",!1),n.select("#radial-tooltip").remove()})}},353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),a=r(42),o=r(67);t.default=function(e){var t=a.useState(!1),r=t[0],i=t[1],l=e.indicator,s=e.country;return n.createElement("div",{className:"fh-panel"},!r&&n.createElement("div",{className:"fh-panel fh-panel--collapsed",onClick:function(){return i(!0)}},"info"),r&&n.createElement("div",{className:"fh-panel fh-panel--expanded"},n.createElement("span",{className:"close",onClick:function(){return i(!1)}},"close"),!s&&!l&&n.createElement("div",{className:"panel-info empty"},n.createElement("p",null,"This is information panel where you'll find data about selected indicator and country."),n.createElement("p",null,"Select country or indicator on main graph by clicking its label to see details here.")),s&&n.createElement("div",{className:"panel-info"},n.createElement("h1",null,s.country),n.createElement("div",null,n.createElement("span",null,"Region: "),s.region),n.createElement("div",null,n.createElement("span",null,"Subregion: "),s.subregion),n.createElement("div",null,n.createElement("span",null,"Population: "),o.formatNumber(s.population,0)),n.createElement("div",null,n.createElement("span",null,"Area (km2): "),o.formatNumber(s.surfacearea,0)),n.createElement("div",null,n.createElement("span",null,"GDP ($bln PPP): "),o.formatNumber(s.GDP))),l&&n.createElement("div",{className:"panel-info"},n.createElement("h1",null,l.label," ",l.unit?"("+l.unit+")":""),n.createElement("div",null,n.createElement("span",null,"Source: "),n.createElement("a",{href:l.url,rel:"noopener noreferrer",target:"_blank"},l.source),n.createElement("span",null," (",l.year,")")),n.createElement("div",null,n.createElement("span",null,"Description: "),n.createElement("p",null,l.description),n.createElement("p",null,l.details)))))}},354:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.baseReducer=function(e,t){var r,a,o;if(a=e,o=t.type,a&&"object"==typeof a&&Object.prototype.hasOwnProperty.call(a,o))return n({},e,((r={})[t.type]=t.value,r));throw new Error("BaseReducer: Unrecognized action type: "+t.type)}},51:function(e,t,r){"use strict";var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"COUNTRY_DATA",function(){return o}),r.d(t,"ECONOMY",function(){return i}),r.d(t,"ENVIRONMENT",function(){return l}),r.d(t,"SOCIAL",function(){return s}),r.d(t,"GOVERNMENT",function(){return c}),r.d(t,"REGION",function(){return u}),r.d(t,"SUBREGION",function(){return d}),r.d(t,"categoryMap",function(){return p});var o="countryData",i="economy",l="environment",s="social",c="government",u="region",d="subregion",p=(a(n={country:{label:"Country",id:0,description:"Name of the country",group:o,desc:0,unit:"",useSqrt:0,source:"",url:"",year:"2019",details:"",flipColor:0},ISO:{label:"ISO Country Code",id:1,description:"ISO alpha-3 code",group:o,desc:0,unit:"",useSqrt:0,source:"FAO",url:"http://www.fao.org/countryprofiles/iso3list/en/",year:"",details:"",flipColor:0},ISO2:{label:"ISO2 Country Code",id:2,description:"ISO alpha-2 code",group:o,desc:0,unit:"",useSqrt:0,source:"Wikipedia, UN Statistics",url:"https://github.com/lukes/ISO-3166-Countries-with-Regional-Codes",year:"2018",details:"",flipColor:0},population:{label:"Population",id:3,description:"Population of a country",group:o,desc:0,unit:"",useSqrt:0,source:"World Bank Data",url:"https://data.worldbank.org/indicator/SP.POP.TOTL",year:"2018",details:"",flipColor:0},surfacearea:{label:"Surface Area",id:4,description:"Surface area of a country",group:o,desc:0,unit:"km2",useSqrt:0,source:"CIA World Factbook",url:"https://www.cia.gov/library/publications/the-world-factbook/fields/2147.html#al",year:"2018",details:"",flipColor:0},region:{label:"Region",id:5,description:"Region",group:o,desc:0,unit:"",useSqrt:0,source:"Wikipedia, UN Statistics",url:"https://github.com/lukes/ISO-3166-Countries-with-Regional-Codes",year:"2018",details:"",flipColor:0},subregion:{label:"Subregion",id:6,description:"Subregion",group:o,desc:0,unit:"",useSqrt:0,source:"Wikipedia, UN Statistics",url:"https://github.com/lukes/ISO-3166-Countries-with-Regional-Codes",year:"2018",details:"",flipColor:0},GINIindex:{label:"GINI Index",id:7,description:"Inequality in the distribution of family income. Lower = better.",group:s,desc:1,unit:"",useSqrt:0,source:"CIA World Factbook",url:"https://www.cia.gov/library/publications/the-world-factbook/rankorder/2172rank.html",year:"varies per country",details:"",flipColor:0},happyplanetindex:{label:"Happy Planet Index",id:8,description:"Well being + life expectancy + inequalities + ecological footprint. Higher = better.",group:s,desc:0,unit:"",useSqrt:0,source:"Happy Planet Index",url:"http://happyplanetindex.org/",year:"2016",details:"",flipColor:0},humandevelopmentindex:{label:"Human Development Index",id:9,description:"Healthy life,knowledge, standard of living. Higher = better.",group:s,desc:0,unit:"",useSqrt:0,source:"UNDP",url:"http://hdr.undp.org/en/data#",year:"2017",details:"",flipColor:0},worldhappinessreportscore:{label:"World Happiness Report Score",id:10,description:"Polled inhabitants rate their quality of life from 1-10. Higher = better.",group:s,desc:0,unit:"1 to 10",useSqrt:0,source:"World Happiness Report",url:"http://worldhappiness.report/ed/2018/",year:"2017",details:"",flipColor:0},sustainableeconomicdevelopmentassessment:{label:"SEDA",id:11,description:"An assessment based on 40 indicators in sustainability, economics, & investments. Higher = better.",group:s,desc:0,unit:"",useSqrt:0,source:"Boston Consulting Group",url:"https://www.bcg.com/en-gb/publications/interactives/seda-2018-guide.aspx",year:"2018",details:"",flipColor:0},womenMPs:{label:"Women MPs",id:12,description:"Proportion of seats held by women in national parliaments (%)",group:s,desc:0,unit:"%",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/SG.GEN.PARL.ZS",year:"2017",details:"Women in parliaments are the percentage of parliamentary seats in a single or lower chamber held by women.",flipColor:0},GDP:{label:"GDP",id:13,description:"Gross Domestic Product",group:i,desc:0,unit:"billions PPP",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},GDPpercapita:{label:"GDP per person",id:14,description:"Gross Domestic Product per person",group:i,desc:0,unit:"PPP",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},GDPgrowth:{label:"GDP Growth",id:15,description:"Annual growth of GDP.",group:i,desc:0,unit:"%",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},healthexpenditure:{label:"Health Expenditure",id:16,description:"Current health expenditure expressed as a percentage of GDP.",group:i,desc:0,unit:"% of GDP",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/SH.XPD.CHEX.GD.ZS",year:"2015",details:"Level of current health expenditure expressed as a percentage of GDP. Estimates of current health expenditures include healthcare goods and services consumed during each year. This indicator does not include capital health expenditures such as buildings, machinery, IT and stocks of vaccines for emergency or outbreaks.",flipColor:0},healthexpenditureperperson:{label:"Health Expenditure per person",id:17,description:"Current expenditures on health per capita expressed in international dollars at purchasing power parity (PPP).",group:i,desc:0,unit:"USD",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/SH.XPD.CHEX.PP.CD",year:"2015",details:"",flipColor:0},educationexpenditure:{label:"Education Expenditure",id:18,description:"General government expenditure on education.",group:i,desc:0,unit:"% of GDP",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/SE.XPD.TOTL.GD.ZS?view=chart",year:"2014",details:"General government expenditure on education (current, capital, and transfers) is expressed as a percentage of GDP. It includes expenditure funded by transfers from international sources to government. General government usually refers to local, regional and central governments.",flipColor:0},educationexpenditureperperson:{label:"Education Expenditure per person",id:19,description:"General government expenditure on education per person.",group:i,desc:0,unit:"USD",useSqrt:0,source:"own calculation",url:"",year:"2014",details:"General government expenditure on education (current, capital, and transfers) per person. It includes expenditure funded by transfers from international sources to government. General government usually refers to local, regional and central governments.",flipColor:0},governmentspendingscore:{label:"Government Spending Score",id:20,description:"Burden of government spending on the country. Lower = Better.",group:c,desc:1,unit:"1 to 100",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},governmentexpenditure:{label:"Government Expenditure",id:21,description:"",group:c,desc:0,unit:"% of GDP",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},schoollifeexpectancy:{label:"School Life Expectancy",id:22,description:"Average male & female, primary to tertiary (years).",group:s,desc:0,unit:"",useSqrt:0,source:"CIA World Factbook",url:"https://www.cia.gov/library/publications/the-world-factbook/fields/2205.html#202",year:"2018",details:"",flipColor:0},Unemployment:{label:"Unemployment Rate",id:23,description:"Unemployment refers to the share of the labor force that is without work but available for and seeking employment. Definitions of labor force and unemployment differ by country.",group:i,desc:1,unit:"%",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},Inflation:{label:"Inflation Rate",id:24,description:"Inflation as measured by the consumer price index reflects the annual percentage change in the cost to the average consumer of acquiring a basket of goods and services",group:i,desc:1,unit:"%",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/FP.CPI.TOTL.ZG",year:"2018",details:"",flipColor:0},politicalrightsscore:{label:"Political Rights Score",id:25,description:"The political rights rating, with 1 representing the most free and 7 the least free.",group:c,desc:1,unit:"1 to 7",useSqrt:0,source:"Freedom House",url:"https://freedomhouse.org/report/freedom-world-2015/methodology",year:"2017",details:"The political rights questions are grouped into three subcategories: Electoral Process, Political Pluralism and Participation, and Functioning of Government. See link for more details.",flipColor:0},civillibertiesscore:{label:"Civil Liberties Score",id:26,description:"The civil liberties rating range from 1 to 7, with 1 representing the most free and 7 the least free.",group:c,desc:1,unit:"1 to 7",useSqrt:0,source:"Freedom House",url:"https://freedomhouse.org/report/freedom-world-2015/methodology",year:"2017",details:"The civil liberties questions are grouped into four subcategories: Freedom of Expression and Belief, Associational and Organizational Rights, Rule of Law, and Personal Autonomy and Individual Rights. See source link for more details.",flipColor:0},freedomscore:{label:"Freedom Score",id:27,description:"The average of the political rights and civil liberties ratings. 1 = most free, 7 = least free",group:c,desc:1,unit:"1 to 7",useSqrt:0,source:"Freedom House",url:"https://freedomhouse.org/report/freedom-world-2015/methodology",year:"2017",details:"Arithmetic mean of Political Rights and Civil Liberties rankings.",flipColor:0},politicalstabilityandabsenceofviolence:{label:"Political Stability and Absence of Violence",id:28,description:"From 2.5 (most stable) to -2.5 (least stable)",group:c,desc:0,unit:"-2.5 to +2.5",useSqrt:0,source:"World Bank",url:"http://info.worldbank.org/governance/wgi/#doc",year:"2017",details:"Political Stability and Absence of Violence measures perceptions of the likelihood of political instability and/or politicallymotivated violence, including terrorism. This measure is based on over 30 indicators.",flipColor:0},governmenteffectiveness:{label:"Government Effectiveness",id:29,description:"Quality of public services, civil service, policy formation, government commitment. 2.5 = most effective.",group:c,desc:0,unit:"-2.5 to +2.5",useSqrt:0,source:"World Bank",url:"http://info.worldbank.org/governance/wgi/#doc",year:"2017",details:"Government effectiveness captures perceptions of the quality of public services, the quality of the civil service and the degree of its independence from political pressures, the quality of policy formulation and implementation, and the credibility of the government's commitment to such policies.",flipColor:0},regulatoryquality:{label:"Regulatory Quality",id:30,description:"Level of policies to support private sector.",group:c,desc:0,unit:"-2.5 to +2.5",useSqrt:0,source:"World Bank",url:"http://info.worldbank.org/governance/wgi/#doc",year:"2017",details:"Regulatory quality captures perceptions of the ability of the government to formulate and implement sound policies and regulations that permit and promote private sector development. ",flipColor:0},ruleoflaw:{label:"Rule of Law",id:31,description:"Quality of rule of law + likelihood of crime / violence.",group:c,desc:0,unit:"-2.5 to +2.5",useSqrt:0,source:"World Bank",url:"http://info.worldbank.org/governance/wgi/#doc",year:"2017",details:"Rule of law captures perceptions of the extent to which agents have confidence in and abide by the rules of society, and in particular the quality of contract enforcement, property rights, the police, and the courts, as well as the likelihood of crime and violence.",flipColor:0},controlofcorruption:{label:"Control of Corruption",id:32,description:"Captures perceptions of the extent to which public power is exercised for private gain.",group:c,desc:0,unit:"-2.5 to +2.5",useSqrt:0,source:"World Bank",url:"http://info.worldbank.org/governance/wgi/#doc",year:"2017",details:"Control of corruption captures perceptions of the extent to which public power is exercised for private gain, including both petty and grand forms of corruption, as well as 'capture' of the state by elites and private interests. ",flipColor:0},worldgovernanceindicatorsaverage:{label:"World Governance Indicators Score",id:33,description:"Average of World Governance Indicators",group:c,desc:0,unit:"-2.5 to +2.5",useSqrt:0,source:"based on World Bank",url:"http://info.worldbank.org/governance/wgi/#doc",year:"2017",details:"Index (arithmetic mean) of World Bank's Government Indicators: Political Stability and Absence of Violence, Government Effectiveness, Regulatory Quality, Rule of Law, Control of Corruption. See link to source for more information. ",flipColor:0},judicialeffectivenessscore:{label:"Judicial Effectiveness Score",id:34,description:"Judicial independence + quality of the judicial process, fairness (/100).",group:c,desc:0,unit:"0 to 100",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},governmentintegrityscore:{label:"Government Integrity Score",id:35,description:"Public trust + transparency + corruption control.",group:c,desc:0,unit:"",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},propertyrightsscore:{label:"Property Rights Score",id:36,description:"How freely can inhabitants acquire private property.",group:c,desc:0,unit:"",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},taxburdenscore:{label:"Tax Burden Score",id:37,description:"Tax burden Score rates country by measuring individual tax rate + corporate tax rate + total tax as % of GDP. Highier values mean lower tax burden = better",group:c,desc:0,unit:"",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},overalleconomicfreedomscore:{label:"Overall Economic Freedom Score",id:38,description:"Economic freedom is the fundamental right of every human to control his or her own labor and property",group:c,desc:0,unit:"",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2017",details:"Economic freedom is the fundamental right of every human to control his or her own labor and property. In an economically free society, individuals are free to work, produce, consume, and invest in any way they please.",flipColor:0},financialfreedomscore:{label:"Financial Freedom Score",id:39,description:"Level of government regulation of financial services, foreign competition, credit & capital development.",group:c,desc:0,unit:"",useSqrt:0,source:"Heritage Foundation",url:"https://www.heritage.org/index/explore",year:"2018",details:"",flipColor:0},co2emissions:{label:"CO2 Emissions",id:40,description:"Carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring. Lower = better.",group:l,desc:1,unit:"thousand metric tons",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/EN.ATM.CO2E.KT?view=chart",year:"2014",details:"Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.",flipColor:0},co2emissionspercapita:{label:"CO2 Emissions per capita",id:41,description:"Carbon dioxide per capita, produced during consumption of solid, liquid, and gas fuels and gas flaring.",group:l,desc:1,unit:"metric tons",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/EN.ATM.CO2E.KT?view=chart",year:"2014",details:"Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.",flipColor:0},renewableenergy:{label:"Renewable Energy Output",id:42,description:"Renewable Energy production as percent of total energy production.",group:l,desc:0,unit:"%",useSqrt:0,source:"World Bank",url:"https://data.worldbank.org/indicator/EG.ELC.RNEW.ZS",year:"2015",details:"Renewable Energy production as percent of total energy output.",flipColor:0},EFConsPerCap:{label:"Ecological Footprint per person",id:43,description:"Ecological Footprint of consumption per person . Lower = better.",group:l,desc:1,unit:"global hectares (gha)",useSqrt:0,source:"",url:"http://data.footprintnetwork.org/#/abouttheData",year:"2014",details:"A global hectare is a biologically productive hectare of land or water with world average biological productivity for a given year.",flipColor:0},EFConsTotGHA:{label:"Total Ecological Footprint",id:44,description:"Total Ecological Footprint of consumption in global hectares (gha). Lower = better.",group:l,desc:1,unit:"gha",useSqrt:0,source:"",url:"http://data.footprintnetwork.org/#/abouttheData",year:"2014",details:"A measure of how much area of biologically productive land and water an individual, population or activity requires to produce all the resources it consumes and to absorb the waste it generates, using prevailing technology and resource management practices. The Ecological Footprint is usually measured in global hectares. A global hectare is a biologically productive hectare with world average biological productivity for a given year.",flipColor:0},Total:{label:"Total score",id:45,description:"Combined value of all indicators. 1 = best",group:"total",desc:0,unit:"0 to 1",useSqrt:0,source:"own calculation",url:"",year:"2019",details:"All indicators were normalized to range between 0 and 1 (flipped when necessary) and then averaged giving overal ranking ranging from 0 (worst) to 1 (best). Indicators with missing data are not considered when averaging."}},s,{group:"",name:s}),a(n,i,{group:"",name:i}),a(n,c,{group:"",name:c}),a(n,l,{group:"",name:l}),a(n,o,{group:"",name:o}),n)},67:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(47),o=r(349),i=r(51);t.dataSource=o,t.textualCategories=["ISO","ISO2","country","region","subregion",i.SOCIAL,i.ENVIRONMENT,i.ECONOMY,i.GOVERNMENT,i.COUNTRY_DATA],t.excludedCategories=t.textualCategories.concat(["population","surfacearea","schoollifeexpectancy","judicialeffectivenessscore","sustainableeconomicdevelopmentassessment","GDP","Inflation","EFConsTotGHA","politicalrightsscore","civillibertiesscore","regulatoryquality","controlofcorruption","ruleoflaw","governmenteffectiveness","governmentexpenditure","financialfreedomscore","propertyrightsscore","politicalstabilityandabsenceofviolence","co2emissions","governmenteffectiveness","healthexpenditureperperson","educationexpenditureperperson"]);var l={Asia:"#F68BAD","Southern Asia":"#A3047D","Western Asia":"#E74F9A","South-eastern Asia":"#F68BAD","Eastern Asia":"#FACECC","Central Asia":"#4E0069",Europe:"#7DAACE","Northern Europe":"#166296","Southern Europe":"#2F83B6","Western Europe":"#3E8DBD","Eastern Europe":"#7DAACE",Africa:"#CFEBA4","Northern Africa":"#6BBE77","Sub-Saharan Africa":"#CFEBA4",Americas:"#C2C1DD","Latin America and the Caribbean":"#7E74B2","Northern America":"#C2C1DD","Australia and New Zealand":"#FCE499",Oceania:"#FDD077",Melanesia:"#FDD077",Micronesia:"#FFF5BF",Polynesia:"#FCE499",none:"#afafaf"},s=[],c=function(e){return!t.textualCategories.includes(e)},u=function(e){return!t.excludedCategories.includes(e)};t.validCountries=function(e){return!s.includes(e)};var d=function(e,t,r,n){var a=n.desc;if(null===e)return null;var o=(e-t)/(r-t);return a?1-o:o};t.modelData=function(e){return Object.keys(e).filter(c).forEach(function(t){var r=+e[t];e[t]=r||null}),n({},e)},t.makeData=function(e){var r=e.columns,o=e.filter(function(e){return t.validCountries(e.country)}),l=function(e){var r=Object.keys(e[0]),o={};return r.filter(function(e){return!t.excludedCategories.includes(e)}).forEach(function(t){var r=i.categoryMap[t].desc,l={values:[]};e.forEach(function(e){var r=e[t],n=e.country;l.values.push({country:n,value:r})});var s=l.values.map(function(e){return e.value});l.extent=a.extent(s);var c=l.extent,u=c[0],p=c[1];l.min=u,l.max=p,l.sum=a.sum(s),l.average=l.sum/s.length,l.normAverage=d(l.average,u,p,{desc:r}),l.desc=r,l.values=l.values.map(function(e){var t=d(e.value,u,p,{desc:r});return n({},e,{normalized:t})}),o[t]=l}),o}(o);return{dataItems:function(e,t){var r=[];return e.forEach(function(e){var n=[],a=e.country,o={id:e.ISO+"Total",country:a,code:e.ISO,normalized:0,indicator:"Total",value:void 0,desc:void 0};Object.keys(e).filter(u).forEach(function(r){var l=t[r].values.find(function(e){return e.country===a}).normalized,s={id:e.ISO+r,country:a,code:e.ISO,indicator:r,value:e[r],normalized:l,useSqrt:i.categoryMap[r].useSqrt,desc:i.categoryMap[r].desc};o.normalized+=l,n.push(s)}),o.normalized=o.normalized/n.length,o.value=+o.normalized.toFixed(2),o.desc=0,n.push(o),r.push.apply(r,n)}),r}(o,l),countries:o,categories:r,indicators:l}};var p,f=a.interpolateGreens,h=a.interpolateYlOrBr,g=a.interpolateBuPu,m=a.interpolatePuBu;t.colorize=function(e){var t=i.categoryMap[e];switch(t?t.group:""){case i.COUNTRY_DATA:return a.scaleSequential(a.interpolatePuBu);case i.ENVIRONMENT:return a.scaleSequential(f);case i.SOCIAL:return a.scaleSequential(h);case i.ECONOMY:return a.scaleSequential(g);case i.GOVERNMENT:return a.scaleSequential(m);case i.REGION:case i.SUBREGION:return a.scaleOrdinal(a.schemeCategory10);default:return a.scaleSequential(a.interpolatePuBu)}},t.desaturate=function(e,t){var r=a.hsl(e);return r.s=t,r.toString()},t.colorByRegion=function(e){return e?l[e]:l.none},t.formatNumber=function(e,t,r,n){void 0===t&&(t=2),void 0===r&&(r="."),void 0===n&&(n=",");try{t=Math.abs(t),t=isNaN(t)?2:t;var a=e<0?"-":"",o=parseInt(Math.abs(Number(e)||0).toFixed(t),10).toString(),i=o.length>3?o.length%3:0;return a+(i?o.substr(0,i)+n:"")+o.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?r+Math.abs(e-+o).toFixed(t).slice(2):"")}catch(t){throw new Error("formatNumber: failed to format number "+e+", error: "+t)}},t.stratifiedCategories=a.stratify().id(function(e){return e.name}).parentId(function(e){return e.group})((p=[],Object.keys(i.categoryMap).filter(function(e){return!["total","countryData"].includes(i.categoryMap[e].group)}).forEach(function(e){var t=i.categoryMap[e].group,r=t||"root",a=n({},i.categoryMap[e],{name:e,group:r});p.push(a)}),p.push({name:"root",group:""}),p))}});